<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Aid Assistant - Tata 1mg</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 450px;
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .emergency-banner {
            background: #ff4444;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 0.9rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 15px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.bot {
            text-align: left;
        }

        .message.user {
            text-align: right;
        }

        .message-bubble {
            display: inline-block;
            padding: 12px 16px;
            border-radius: 20px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message.bot .message-bubble {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .quick-actions {
            padding: 15px 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .action-btn {
            padding: 12px;
            border: 2px solid #FF6B6B;
            background: white;
            color: #FF6B6B;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background: #FF6B6B;
            color: white;
            transform: translateY(-2px);
        }

        .input-container {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            outline: none;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-btn {
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s ease;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .emergency-call {
            background: #ff4444;
            color: white;
            padding: 15px;
            text-align: center;
            position: sticky;
            bottom: 0;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s ease;
        }

        .emergency-call:hover {
            background: #cc0000;
        }

        .steps-container {
            background: #f0f8ff;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }

        .step {
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
            font-weight: 500;
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-number {
            background: #4CAF50;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            margin-right: 10px;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px;
            opacity: 0.7;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #667eea;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.85rem;
            color: #856404;
        }
    </style>

</head>
<body>
    <div class="chatbot-container">
        <div class="header">
            <h1>üè• First Aid Assistant</h1>
            <div class="subtitle">Immediate guidance until help arrives</div>
        </div>
        
        <div class="emergency-banner" id="emergencyBanner" style="display: none;">
            üö® EMERGENCY DETECTED - Follow instructions carefully
        </div>

        <div class="chat-container" id="chatContainer">
            <div class="message bot">
                <div class="message-bubble">
                    üëã I'm your First Aid Assistant. I can help with immediate guidance for emergencies like burns, cuts, choking, and more. 
                    <div class="disclaimer">
                        ‚ö†Ô∏è For life-threatening emergencies, call 108 immediately!
                    </div>
                </div>
            </div>
        <div class="message bot"><div class="message-bubble">üö® Quick tip: For severe emergencies, call 108 first, then use this assistant for immediate first aid guidance while waiting for help to arrive.</div></div></div>

        <div class="quick-actions">
            <div class="action-buttons">
                <button class="action-btn" onclick="handleEmergency('burn')">üî• Burns</button>
                <button class="action-btn" onclick="handleEmergency('cut')">ü©∏ Cuts/Wounds</button>
                <button class="action-btn" onclick="handleEmergency('choking')">üòµ Choking</button>
                <button class="action-btn" onclick="handleEmergency('fracture')">ü¶¥ Fracture</button>
            </div>
            
            <div class="input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="Describe your emergency..." onkeypress="handleKeyPress(event)">
                <button class="send-btn" onclick="sendMessage()">Send</button>
            </div>
        </div>

        <div class="emergency-call" onclick="callEmergency()">
            üìû EMERGENCY CALL 108
        </div>
    </div>

    <script>
        const firstAidDatabase = {
            burn: {
                title: "üî• Burn Treatment",
                emergency: true,
                steps: [
                    "Remove from heat source immediately",
                    "Cool the burn with cold running water for 10-20 minutes",
                    "Remove any jewelry or tight clothing near the burn",
                    "Cover with a clean, dry cloth",
                    "Do NOT use ice, butter, or oil",
                    "Seek medical attention for severe burns"
                ],
                warning: "For burns larger than your palm, electrical burns, or chemical burns, seek immediate medical attention!"
            },
            cut: {
                title: "ü©∏ Cut/Wound Treatment",
                emergency: false,
                steps: [
                    "Apply direct pressure with a clean cloth",
                    "Raise the injured area above heart level if possible",
                    "Clean your hands before treating the wound",
                    "Once bleeding stops, clean the wound with water",
                    "Apply antibiotic ointment if available",
                    "Cover with a sterile bandage"
                ],
                warning: "Seek medical attention if bleeding doesn't stop, the cut is deep, or shows signs of infection."
            },
            choking: {
                title: "üòµ Choking Emergency",
                emergency: true,
                steps: [
                    "Encourage coughing if the person can still cough",
                    "If unable to cough, perform back blows: 5 sharp blows between shoulder blades",
                    "If unsuccessful, perform abdominal thrusts (Heimlich maneuver)",
                    "Place hands above navel, thrust upward and inward",
                    "Alternate between 5 back blows and 5 abdominal thrusts",
                    "Continue until object dislodges or person becomes unconscious"
                ],
                warning: "Call 108 immediately! If person becomes unconscious, begin CPR."
            },
            fracture: {
                title: "ü¶¥ Fracture Care",
                emergency: true,
                steps: [
                    "Do not move the person unless in immediate danger",
                    "Immobilize the injured area with a splint",
                    "Apply ice wrapped in cloth to reduce swelling",
                    "Check circulation below the injury",
                    "Do not try to realign the bone",
                    "Keep the person comfortable and calm"
                ],
                warning: "Call emergency services immediately for suspected fractures!"
            }
        };

        let conversationHistory = [];

        function addMessage(text, isUser = false, isSteps = false, emergencyType = null) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            if (isSteps && emergencyType) {
                const data = firstAidDatabase[emergencyType];
                messageDiv.innerHTML = `
                    <div class="message-bubble">
                        <strong>${data.title}</strong>
                        <div class="steps-container">
                            ${data.steps.map((step, index) => 
                                `<div class="step">
                                    <span class="step-number">${index + 1}</span>
                                    ${step}
                                </div>`
                            ).join('')}
                        </div>
                        <div class="disclaimer">‚ö†Ô∏è ${data.warning}</div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `<div class="message-bubble">${text}</div>`;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const chatContainer = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="message-bubble">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <span style="margin-left: 10px;">Analyzing...</span>
                    </div>
                </div>
            `;
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingElement = document.getElementById('typing-indicator');
            if (typingElement) {
                typingElement.remove();
            }
        }

        function handleEmergency(type) {
            const data = firstAidDatabase[type];
            if (!data) return;

            addMessage(`I need help with: ${type}`, true);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                if (data.emergency) {
                    document.getElementById('emergencyBanner').style.display = 'block';
                }
                
                addMessage(`I'll guide you through ${type} treatment. Follow these steps carefully:`, false, true, type);
                
                setTimeout(() => {
                    addMessage("Are you following these steps? Let me know if you need clarification on any step or if the situation changes.", false);
                }, 1000);
            }, 1500);
        }

        function analyzeUserInput(input) {
            const lowerInput = input.toLowerCase();
            
            // Emergency keywords detection
            const emergencyKeywords = {
                burn: ['burn', 'burned', 'burning', 'fire', 'hot', 'scald'],
                cut: ['cut', 'bleeding', 'blood', 'wound', 'injury', 'gash'],
                choking: ['choking', 'choke', 'swallow', 'throat', 'airway', 'breathing'],
                fracture: ['fracture', 'broken', 'bone', 'break', 'snap', 'crack']
            };

            for (const [type, keywords] of Object.entries(emergencyKeywords)) {
                if (keywords.some(keyword => lowerInput.includes(keyword))) {
                    return type;
                }
            }

            return null;
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage(message, true);
            input.value = '';
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                const emergencyType = analyzeUserInput(message);
                
                if (emergencyType) {
                    handleEmergency(emergencyType);
                } else {
                    // General response for unrecognized input
                    addMessage("I understand you need help. Can you please be more specific about the emergency? You can:\n\n‚Ä¢ Use the quick action buttons above\n‚Ä¢ Describe the injury (burns, cuts, choking, fracture)\n‚Ä¢ Tell me what happened\n\nFor immediate life-threatening emergencies, call 108 right away!", false);
                }
            }, 1000);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function callEmergency() {
            // In a real app, this would integrate with the phone's dialer
            alert("üö® EMERGENCY SERVICES\n\nIn a real emergency:\n‚Ä¢ Call 108 (Emergency)\n‚Ä¢ Call 102 (Ambulance)\n‚Ä¢ Call your nearest hospital\n\nThis is a demo - actual calling functionality would be integrated with the device.");
            
            addMessage("üö® Remember: For life-threatening emergencies, always call professional emergency services first, then follow first aid steps while waiting for help.", false);
        }

        // Initialize the chatbot
        window.onload = function() {
            addMessage("üö® Quick tip: For severe emergencies, call 108 first, then use this assistant for immediate first aid guidance while waiting for help to arrive.", false);
        };

        // Auto-scroll chat container
        const observer = new MutationObserver(() => {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        });

        observer.observe(document.getElementById('chatContainer'), {
            childList: true,
            subtree: true
        });
    </script>
</body>
</html>



